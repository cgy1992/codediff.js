<!doctype html>
<html>
<head>
  <link rel=stylesheet href="diffview.css">
  <link rel=stylesheet href="newdiffview.css">
  <style>
    td.before, td.after, td.skip {
      width: 400px;
      max-width: 400px;
      min-width: 400px;
    }
  </style>
  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
</head>
<body>
<p>Here's a sample diff rendered with jsdifflib:</p>
<div id="diffview">
</div>

<script src="difflib.js"></script>
<!--
<script src="diffview.js"></script>
-->
<script src="newdiffview.js"></script>
<script type="text/javascript">
function renderDiff(diffDiv, contentsBefore, contentsAfter) {
  // From https://github.com/cemerick/jsdifflib
  var baseLines = difflib.stringAsLines(contentsBefore);
  var afterLines = difflib.stringAsLines(contentsAfter);

  // create a SequenceMatcher instance that diffs the two sets of lines
  var sm = new difflib.SequenceMatcher(baseLines, afterLines);

  // get the opcodes from the SequenceMatcher instance
  // opcodes is a list of 3-tuples describing what changes should be made to the base text
  // in order to yield the new text
  var opcodes = sm.get_opcodes();

  // build the diff view and add it to the current DOM
  // diffDiv.appendChild(diffview.buildView({
  //     baseTextLines: baseLines,
  //     newTextLines: afterLines,
  //     opcodes: opcodes,
  //     // set the display titles for each resource
  //     baseTextName: "Before",
  //     newTextName: "After",
  //     contextSize: 3
  // }));
  diffDiv.appendChild(diffview.buildView(contentsBefore, contentsAfter, {}));
}
</script>
<script type="notjavascript" id="before">Hello
Hello
Hello
Hello
Hello
Hello
Hello
Hello
Hello
to the World of Tomorrow
Here's a line with a change that's 'hard' to spot without character diffs.

How's it going?

I'm going to delete this.

Line A
Line B
Line C
Line D
Line E
Line F
Line G
Line H
Line I
Line J
Line K
Line L
Line M
Line N
Line O
Line P
Line Q
Line R
Line S
Line T
Line U
Line V
Line W
Line X
Line Y
Line Z
</script>
<script type="notjavascript" id="after">Hello
Hello
Hello
Hello
Hello
Hello
Hello
Hello
Hello
to the Words of Tomorrow
Here's a line with a change that's "hard" to spot without character diffs.

How's it going?

Line A
Line B
Line B2
Line C
Line D
Line E
Line F
Line G
Line H
Line I
Line J
Line K
> Line L2
Line M
Line N
Line O
Line Q
Line R
Line S
Line T
Line U
Line V
Line W
Line X
Line Y
Line Z
</script>

<script type="text/javascript">
var beforeText = document.getElementById("before").innerHTML;
var afterText = document.getElementById("after").innerHTML;
var diffDiv = document.getElementById("diffview");
renderDiff(diffDiv, beforeText, afterText);
</script>

</body>
</html>
